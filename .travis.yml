language: python
python:
- '2.7'
install:
- python setup.py bdist
- pip install .
script: run_tests #cxmanage --help
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- export GIT_TAG=`python -c 'import cxmanage_api.__init__; print cxmanage_api.__init__.__version__'`
- export GIT_TAG=v$GIT_TAG.Build$TRAVIS_BUILD_NUMBER
- echo $GIT_TAG
- git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
- git push https://$GITPERM@github.com/SilverLiningSystems/cxmanage-test
- export RELEASE_FILE=$(ls dist/*.tar.gz)
- echo "deploying $RELEASE_FILE to Github releases"
notifications:
  slack:
    secure: kJShCNMzboCvKYNAXU0hLjq487yYHoUBLdaNdhyFwt5qdA92ZhCJ+SePThVGFyy000y0ChjHSW9lwDce3vP/9O+WY7CD6qsjufLcm1UITe8osDegOtuc2xhNG9LUwv7EhZUtOoUS/zlCh5xNnIy1EbAY3fDWzlg2xQTijANf/IY8TNiwaHGH3x6wiC8ysDAT76oYto7u7DddR8wCDBvT0Ublhvh/01ZGRZcloHDpM6twMlOqveFChxZIibJinbEi72z1xMhyw59GBWUey31hD/etDNjBlzn23N/XuYvpW04zZoDoEdnf3Wx5LZf3c0G7AiKkynX6lZIYBK785VHNv3XeGx5/Jqxov1GZA1Gfo853P/hOLpMJcdpMNCMjyBm8jdAUPwwWYAZmpPaNMgkPljXXchvmd5BO9PDh3QCt5KeFXCMesD0/ZH/FkPLFaierbem8xN8pnjshdiVPOVhs4Znth+lvtBKUbJetztUSGL3NKm9mPIphs2Bn4x5YY2YL9XjgML9kT2zS3qWP8iEpwYXGfm1QH7Gj9Wx6YBD7Io/l675/Vg46zwSlJcNJGCcvBeD/BEKni1x23T659oVGTIFN3+pwXhvz9+FLPj+mwQ1lmpU147K3BHOLR69pJMJQ6tMFOXMy64JTXNkZ6ngn8fHYdVr+xHEzdOH6kw2t4lE=
deploy:
- provider: releases
  api_key:
    secure: R9FLRkDEMy5I+P2tBgTzKGsqiwJ7woDMwTqHrssUAl3pbHX6BdLyjBqtviQptzOO6meMIvzHJoIxy0ZfUQGC8jQFBdfgm6J1/tipd0c5PByMF38OMj5knLSMnsQYMduGOgTbaGdbi6CrdqCMpWQ+ZZp1Zq4bP+rqmp0iBc/AnO6USm2HSZeuUSC9mGR4A5YRYMmFKZ1DxdDg7gvLgYd4NeOder0krpw+UGeFnWwEvVNUTIdX0OU7lJdf0xElerMCX/aB5wPY+n/tKYbIp8pjzBx3729EwaM6JP4CrI6GxB8THbX/AYCA04v36QhBqMNwGraODUhG6ew2U1q7toMW7DtQDCxdQgGQ5eq6X3DjoSsNkwvkRjaPBD+cAQUXOkxKaDslEyGKjHhIESdIv7GMbyMSVuoyNS4f4UiDZH3q9XFK6rDSjyBRl8aJGHlDOUeuqmJ/Yy3mcJLeqbUT71MEhq0WVcmi6nOBHa7SwvHExBAXWAX+LJ6IROALTQRdUplNpU7Da8gJwYIE8cvJL/XgrFG59lqVgFMmR32wPTsy7HNqMKTZxrN0lEdkNkT5zCi/I4aFc9biIOzVEMAHPfuX9XTLQ3ORlIZE7H22x9W4NL6njdPqlVRqpzdTQABTleC7M4eu4SMZNufvQ2CELTOEWck/u8uzwrn3hO0doTKABWs=

- provider: pypi
  user: sls.jarvis
  server: https://testpypi.python.org/pypi
  password:
    secure: iLY5H9lyYQJUhIK91c3RbdOW57QzrxO4DixjzrfRI24H3i2su+dTZeCUCFdWLgkF5PBUC3PWfWekEDJnxkK8BujmrjqQOexGZc5WGS3bd9OVrPgQr5f8JJbR8X/wUNpAmE5FZca8vxWD1qYz0IjySUUZBUIf757io2n7KRQc+0njlzBOWCDPOoLotyTB04t49/jNfaurKsuQHKhcJQ+anU5+CLKqv0bKfUlH/AQEPRoku0R2ZHS0Vowzis95IHuMKjRg04J0NJi/GOWyV/zh0mRlLkTCsWYbHSiYfZe7J0vXKN5ATihnX0glETZ1A8a4hlSSTQGHFrXqpUSmZacllEMZ8OoI0meP7ZtNjrg+EF6owLvjbDxrsPrdaWr/gRa6dcJx3hnXb56oqUU5atssnGC/FIIQ0wuWu9PUORnxzLROgSovoPA/IyXbHlWaHklcQ74j0roas1725Mobal/oafqR9k4a3IV3BsWm5VHHid4vj0bM0JEhJfSOFXbMj0yHFpaTLKxMSagW+TSiPr2Sg1QEmTWeGEnGfXYndPXQCgKoq849jTw7uGBV71aLObadhjybHRn+HYOfLN5OSIh+Ik63gtFBeHSjP6Et1lO/C59D8PsttyCDsBoOjleydvS7/kZPlXz757WCBT34rolmHEx5eSdMzC1z8sCVwH0/bMM=


  skip_cleanup: true
  file_glob: true
  file: "$RELEASE_FILE"
  on:
    repo: SilverLiningSystems/cxmanage-test
    tags: false
  branches:
    except:
    - /v[0-9]/  
env:
  global:
    secure: PV+C9uOEl547fWH7Jtq4/mc5BHJU3WxiY5nGRPRxJBCg9sEiAlF8si4ub9+Y0f/+f7ppMzQc1TFCQ+1kCUcygeqgcVgcaqNy1WugaTs840eCWaQJSYK8ky7TKOJmHFilvfwdN0O3Keg22fkyvFIn5j7BvjxSbRaOcncl88OD1Rwb57o6U92xZN97/XBJ0u+WIGtLXL3NlpwxpaqGZc88PwNLhgu3EgWClHEscPqQcfBpfhvIE3bOUQFya3YgYsvtrKheE7cOfl/ZtOEp6xeX6fkG0mmLAIEeikFF75ZBfyaP50EOAvrP4IBM5gMYfO0+CGzx0yOoKkxwtecODPOZDIJoglLNetkT4WWDXvVBNszIHGA2yasjgty1cBo18qS9i8f9ZfV4BmqQH0HUx6Ku2qRGnH+nAYJ9hzn0IHWC27547bTx9fWgxVdYg32HEXvoddfYRoQKkvzhj+dI1Dwt7T9JTDkV7cwnjzKaWYQEKv1LHmMHP12+Fu8/sa9lTtvnF/HDgOvv6BUBHr1172c3n+t8GNscOB4jZrUvrxTWPwPrInvgaKzEeY7tmwQcbYaxYioA+l7rKyhc5Z0qQQzS15yU5kFaLRpthBb7u4eIqdau31XqbdZiL4Vjgrm5emdxmYLMIUQQu3r3M2jca/aC9HQNUkKABqxLw4xAZiZS9Lo=
